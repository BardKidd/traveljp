"use strict";(self["webpackChunktraveljp"]=self["webpackChunktraveljp"]||[]).push([[496],{7384:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var l=a(3396),i=a(7139),o=a(9242);const s=e=>((0,l.dD)("data-v-588f5b18"),e=e(),(0,l.Cn)(),e),r={class:"mx-auto w-5/6 lg:w-4/5"},c={class:"pt-44 pb-5 text-2xl md:text-3xl lg:text-4xl font-bold text-justify"},n={class:"primary-black mb-5 otherFont font-bold"},d={class:"lg:flex mb-32"},p={class:"flex-2"},m={class:"overflow-hidden rounded-xl"},u=["id"],g=["src","alt"],h={key:"label",class:"w-full xl:w-[800px] text-center absolute top-[90%] lg:flex justify-center"},f=["onClick","for"],b={class:"otherFont mt-5 mb-20 lg:mb-0 font-bold"},v={class:"flex-1 flex flex-col ml-0 lg:ml-10 h-fit p-5 shadow-[0_0_20px_rgba(0,0,0,0.2)]"},w={class:"otherFont"},y={class:"otherFont"},x={class:"mb-3"},_={class:"text-2xl"},k={key:0,class:"primary-red text-3xl font-bold"},D={class:"flex justify-between mb-3"},I=["value"],C=s((()=>(0,l._)("span",{class:"text-center mt-2 text-sm otherFont font-bold"},[(0,l.Uk)("聯繫我們 "),(0,l._)("span",{class:"hover:primary-red cursor-pointer"},"0800-123456")],-1))),S=s((()=>(0,l._)("div",{class:"lLine w-full lg:w-1/3 mb-10"},null,-1))),j={class:"lg:flex mb-32"},N=["onClick"],H={class:"before:content-[''] relative before:absolute before:w-full before:h-full before:bg-primary-black before:opacity-0 hover:before:opacity-30 max-h-60 overflow-hidden"},L=["src"],A={class:""};function G(e,t,a,s,G,O){const U=(0,l.up)("font-awesome-icon");return(0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("h1",c,(0,i.zw)(s.detail.title),1),(0,l._)("p",n,[(0,l.Wm)(U,{class:"primary-red pr-1",icon:["fas","map-marker-alt"]}),(0,l.Uk)((0,i.zw)(s.detail.category),1)]),(0,l._)("section",d,[(0,l._)("div",p,[(0,l._)("div",m,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.detail?.imagesUrl?.length,((e,t)=>((0,l.wg)(),(0,l.iD)("input",{class:"hidden",key:e,id:`radio${t}`,type:"radio"},null,8,u)))),128)),(0,l.Wm)(o.W3,{name:s.transitionName,tag:"div",class:"relative bg-primary-red bg-primary-red h-[350px] md:h-[500px] xl:w-[800px]"},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.detail?.imagesUrl,((e,t)=>(0,l.wy)(((0,l.wg)(),(0,l.iD)("div",{class:"absolute overflow-hidden",key:e},[(0,l._)("img",{class:"md:object-cover object-center w-full xl:w-[800px] h-[350px] md:h-[500px]",src:e,alt:`產品圖片${t}`},null,8,g)])),[[o.F8,t===s.show]]))),128)),(0,l._)("div",h,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.detail?.imagesUrl?.length,((e,t)=>((0,l.wg)(),(0,l.iD)("label",{onClick:e=>s.setShow(t),for:`radio${t}`,class:(0,i.C_)(["inline-block manual-btn border-2 p-1 rounded-xl border-[#fff] cursor-pointer mr-10 hover:bg-primary-red",s.show===t?"bg-slate-100":""]),key:e},null,10,f)))),128))])])),_:1},8,["name"])]),(0,l._)("p",b,(0,i.zw)(s.detail.content),1)]),(0,l._)("div",v,[(0,l._)("p",w,"旅行天數:"+(0,i.zw)(s.detail.unit),1),(0,l._)("div",y,[(0,l._)("div",x,[(0,l._)("p",_,[(0,l.Wm)(U,{icon:["fas","dollar-sign"]}),(0,l._)("span",{class:(0,i.C_)(s.detail.price!==s.detail.origin_price?"line-through":"")},(0,i.zw)(s.detail.origin_price),3),s.detail.price!==s.detail.origin_price?((0,l.wg)(),(0,l.iD)("span",k,(0,i.zw)(s.detail.price),1)):(0,l.kq)("",!0)])])]),(0,l._)("div",D,[(0,l.wy)((0,l._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.qty=e),class:"border flex-1 mr-1 py-2 px-3 rounded"},[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(10,((e,t)=>(0,l._)("option",{value:t+1,key:`adult${t}`},(0,i.zw)(e)+" 位 ",9,I))),64))],512),[[o.bM,s.qty]])]),(0,l._)("button",{type:"button",class:"commonBtn mb-2",onClick:t[1]||(t[1]=e=>s.joinTheShoppingCar(s.detail.id))}," 我要這個 "),C])]),S,(0,l._)("section",j,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.sameCategory.slice(0,3),(e=>((0,l.wg)(),(0,l.iD)("div",{class:"pr-2 mb-5 lg:mb-0 w-full lg:w-1/3 cursor-pointer",key:e.id,onClick:t=>s.goSameCategory(e.id)},[(0,l._)("div",H,[(0,l._)("img",{class:"h-64 w-full object-cover object-center",src:e?.imagesUrl[0],alt:"相關產品圖片"},null,8,L)]),(0,l._)("p",A,(0,i.zw)(e.title),1)],8,N)))),128))])])}var O=a(6265),U=a.n(O),z=a(4870),$=a(678),F=a(65),Y={name:"ShopDetail",setup(){const e=(0,$.yj)(),t=(0,$.tv)(),a=(0,F.oR)(),i=(0,z.iH)(0),o=(0,z.iH)("left"),s=(0,l.f3)("$ElNotification"),r=(0,z.iH)(1),c=(0,z.iH)([]),n=(0,z.iH)([]),d=(0,z.iH)({category:"",content:"",description:"",id:"",imageUrl:"",imagesUrl:[],is_enabled:1,num:1,origin_price:0,price:0,title:"",unit:""}),p=e=>{const t=`https://vue3-course-api.hexschool.io/api/traveljp/product/${e}`;a.commit("ISLOADING",!0),U().get(t).then((e=>{e.data.success?d.value=e.data.product:s({title:"錯誤",message:e.data.message,type:"error"}),a.commit("ISLOADING",!1)})).catch((e=>{e&&a.commit("ISLOADING",!1)}))},m=()=>{const e="https://vue3-course-api.hexschool.io/api/traveljp/products/all";n.value=[],a.commit("ISLOADING",!0),U().get(e).then((e=>{e.data.success?(c.value=e.data.products,c.value.forEach((e=>{e.category===d.value.category&&e.id!==d.value.id&&n.value.push(e)}))):s({title:"錯誤",message:`${e.data.message}`,type:"error"}),a.commit("ISLOADING",!1)})).catch((e=>{e&&a.commit("ISLOADING",!1)}))},u=e=>{i.value=e},g=e=>{const t="https://vue3-course-api.hexschool.io/api/traveljp/cart",l={product_id:e,qty:r.value};a.commit("ISLOADING",!0),U().post(t,{data:l}).then((e=>{e.data.success?s({title:"成功",message:e.data.message,type:"success"}):s({title:"錯誤",message:e.data.message,type:"error"}),a.commit("ISLOADING",!1)})).catch((e=>{e&&a.commit("ISLOADING",!1)}))},h=async e=>{t.push({params:{id:e}}),await p(e),await m()};return(0,l.YP)((()=>i.value),((e,t)=>{o.value=e>t?"right":"left"})),(0,l.bv)((()=>{m(),p(e.params.id)})),{detail:d,show:i,qty:r,transitionName:o,sameCategory:n,setShow:u,joinTheShoppingCar:g,goSameCategory:h}}},q=a(89);const K=(0,q.Z)(Y,[["render",G],["__scopeId","data-v-588f5b18"]]);var W=K}}]);