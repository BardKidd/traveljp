"use strict";(self["webpackChunktraveljp"]=self["webpackChunktraveljp"]||[]).push([[296],{1889:function(e,l,t){t.r(l),t.d(l,{default:function(){return Z}});var a=t(3396),s=t(9242),r=t(7139);const o=(0,a._)("div",{class:"orderSearchBG mb-32"},null,-1),d={class:"container w-5/6 lg:w-4/5 mx-auto mb-16"},c=(0,a._)("div",{class:"flex items-center mb-12 sm:mb-24 md:mb-32"},[(0,a._)("div",{class:"hidden lg:block lrLine flex-1"}),(0,a._)("h1",{class:"text-center flex-1 font-bold text-4xl md:text-5xl lg:text-6xl otherFont"}," 訂單搜尋 "),(0,a._)("div",{class:"hidden lg:block lrLine flex-1"})],-1),n={class:"md:flex rounded hover:md:shadow-md md:shadow p-10"},u={key:0,class:"container w-full md:w-4/5 lg:w-3/5 mx-auto pt-10 primary-black"},i=(0,a._)("thead",null,[(0,a._)("tr",{class:"leading-loose"},[(0,a._)("th"),(0,a._)("th",null,"商品"),(0,a._)("th",null,"人數"),(0,a._)("th",null,"單價"),(0,a._)("th",null,"優惠"),(0,a._)("th",null,"小計")])],-1),m={class:"w-1/5"},p=["src"],_={class:"pl-1"},x={class:"text-sm md:text-lg text-justify"},f={class:"primary-red text-justify"},w={class:"text-center"},g={class:"text-center font-bold"},b={class:"font-bold text-sm md:text-md"},h={key:0},v={class:"block"},y={class:"text-center font-bold primary-red"},D={class:"text-right font-bold text-lg"},k={class:"border-t-4 pt-4"},z={class:"flex flex-col"},I=(0,a._)("label",{class:"modalTitle"},"訂購人名稱",-1),O={class:"modalInput"},j={class:"flex flex-col"},L=(0,a._)("label",{class:"modalTitle"},"聯絡信箱",-1),S={class:"modalInput"},T={class:"flex flex-col"},V=(0,a._)("label",{class:"modalTitle"},"連絡電話",-1),G={class:"modalInput"},H={class:"flex flex-col"},N=(0,a._)("label",{class:"modalTitle"},"訂購地址",-1),q={class:"modalInput"},A={class:"flex flex-col"},C=(0,a._)("label",{class:"modalTitle"},"備註",-1);function U(e,l,t,U,B,K){return(0,a.wg)(),(0,a.iD)(a.HY,null,[o,(0,a._)("div",d,[c,(0,a._)("div",n,[(0,a.wy)((0,a._)("input",{type:"text",class:"w-full md:w-auto md:flex-2 border rounded-lg md:mr-5 p-5 text-lg",placeholder:"訂單編號","onUpdate:modelValue":l[0]||(l[0]=e=>U.inputValue=e),onKeyup:l[1]||(l[1]=(0,s.D2)(((...e)=>U.getOrder&&U.getOrder(...e)),["enter"]))},null,544),[[s.nr,U.inputValue,void 0,{trim:!0}]]),(0,a._)("button",{type:"button",onClick:l[2]||(l[2]=(...e)=>U.getOrder&&U.getOrder(...e)),class:"w-full md:w-auto mt-3 md:mt-0 commonBtn"}," 送出 ")]),U.orderData?.id?((0,a.wg)(),(0,a.iD)("section",u,[(0,a._)("table",null,[i,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(U.orderData?.products,(e=>((0,a.wg)(),(0,a.iD)("tr",{class:"border-b-2",key:e?.id},[(0,a._)("td",m,[(0,a._)("img",{src:e.product?.imagesUrl[0],alt:""},null,8,p)]),(0,a._)("td",_,[(0,a._)("h3",x,(0,r.zw)(e.product?.title),1),(0,a._)("p",f,(0,r.zw)(e.product?.category),1)]),(0,a._)("td",w,(0,r.zw)(e.qty),1),(0,a._)("td",g,(0,r.zw)(e.product?.price),1),(0,a._)("td",b,[e?.coupon?((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("span",v,(0,r.zw)(e?.coupon.title),1),(0,a._)("span",null,(0,r.zw)(e?.coupon.percent)+"%",1)])):(0,a.kq)("",!0)]),(0,a._)("td",y,(0,r.zw)(e.final_total),1)])))),128))])]),(0,a._)("p",D,"總金額："+(0,r.zw)(U.orderData?.total),1),(0,a._)("section",k,[(0,a._)("div",z,[I,(0,a._)("p",O,(0,r.zw)(U.orderData?.user?.name),1)]),(0,a._)("div",j,[L,(0,a._)("p",S,(0,r.zw)(U.orderData?.user?.email),1)]),(0,a._)("div",T,[V,(0,a._)("p",G,(0,r.zw)(U.orderData?.user?.tel),1)]),(0,a._)("div",H,[N,(0,a._)("p",q,(0,r.zw)(U.orderData?.user?.address),1)]),(0,a._)("div",A,[C,(0,a.wy)((0,a._)("textarea",{class:"modalInput",placeholder:"給我們的留言","onUpdate:modelValue":l[3]||(l[3]=e=>U.orderData.message=e),readonly:""},null,512),[[s.nr,U.orderData.message]])])])])):(0,a.kq)("",!0)])],64)}var B=t(6265),K=t.n(B),Y=t(65),$=t(4870),E={name:"OrderSearch",setup(){const e=(0,a.f3)("$ElNotification"),l=(0,Y.oR)(),t=(0,$.iH)({}),s=(0,$.iH)(),r=()=>{if(!s.value)return;const a=`https://vue3-course-api.hexschool.io/api/traveljp/order/${s.value}`;l.commit("ISLOADING",!0),K().get(a).then((a=>{a.data.success?t.value=a.data.order:e({title:"錯誤",message:a.data.message,type:"error"}),a.data.order||e({title:"錯誤",message:"查無此訂單",type:"error"}),l.commit("ISLOADING",!1)})).catch((()=>{l.commit("ISLOADING",!1)}))};return{getOrder:r,orderData:t,inputValue:s}}},F=t(89);const R=(0,F.Z)(E,[["render",U]]);var Z=R}}]);