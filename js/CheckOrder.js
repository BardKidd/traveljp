"use strict";(self["webpackChunktraveljp"]=self["webpackChunktraveljp"]||[]).push([[625],{842:function(t,e,l){l.r(e),l.d(e,{default:function(){return R}});var s=l(3396),r=l(7139),a=l(9242);const o=(0,s._)("section",{class:"text-center w-5/6 md:w-4/5 lg:w-3/5 mx-auto pt-44 flex"},[(0,s._)("p",{class:"py-2 flex-1 px-5 text-md sm:text-lg md:text-xl font-bold bg-primary-retouch2 rounded-t-md"}," 1. 購物明細 "),(0,s._)("p",{class:"py-2 flex-1 px-5 text-lg md:text-xl font-bold bg-primary-red rounded-t-md"}," 2. 確認訂單 "),(0,s._)("p",{class:"py-2 flex-1 px-5 text-lg md:text-xl font-bold bg-primary-retouch2 rounded-t-md"}," 3. 完成訂購 ")],-1),d={class:"w-5/6 md:w-4/5 lg:w-3/5 mx-auto pt-10 primary-black"},c=(0,s._)("div",{class:"flex items-center justify-between border-b-4 pb-10"},[(0,s._)("h1",{class:"text-3xl md:text-4xl lg:text-5xl font-bold"},"確認訂單")],-1),n=(0,s._)("thead",null,[(0,s._)("tr",{class:"leading-loose"},[(0,s._)("th"),(0,s._)("th",null,"商品"),(0,s._)("th",null,"人數"),(0,s._)("th",null,"單價"),(0,s._)("th",null,"小計"),(0,s._)("th")])],-1),m={class:"w-1/5"},p=["src"],i={class:"pl-1"},u={class:"text-sm sm:text-md md:text-lg text-justify"},x={class:"primary-red text-justify"},_={class:"text-sm sm:text-md text-center w-1/5"},f={class:"text-sm sm:text-md text-center font-bold"},h={class:"text-sm sm:text-md text-center font-bold primary-red"},b={class:"border-t-4 pt-4"},I={class:"flex flex-col"},g=(0,s._)("label",{class:"modalTitle"},"訂購人名稱",-1),w={class:"modalInput"},y={class:"flex flex-col"},v=(0,s._)("label",{class:"modalTitle"},"聯絡信箱",-1),k={class:"modalInput"},O={class:"flex flex-col"},z=(0,s._)("label",{class:"modalTitle"},"連絡電話",-1),j={class:"modalInput"},D={class:"flex flex-col"},N=(0,s._)("label",{class:"modalTitle"},"訂購地址",-1),A={class:"modalInput"},G={class:"flex flex-col"},L=(0,s._)("label",{class:"modalTitle"},"備註",-1),S={class:"mt-5 mb-10 bg-primary-retouch rounded p-5 flex justify-end items-center"},C={class:"text-right"},T={class:"mr-5 font-bold otherFont text-lg"};function H(t,e,l,H,$,U){return(0,s.wg)(),(0,s.iD)(s.HY,null,[o,(0,s._)("section",d,[c,(0,s._)("table",null,[n,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(H.orderInfo.products,(t=>((0,s.wg)(),(0,s.iD)("tr",{class:"border-b-2",key:t.id},[(0,s._)("td",m,[(0,s._)("img",{src:t.product?.imagesUrl[0],alt:""},null,8,p)]),(0,s._)("td",i,[(0,s._)("h3",u,(0,r.zw)(t.product?.title),1),(0,s._)("p",x,(0,r.zw)(t.product?.category),1)]),(0,s._)("td",_,(0,r.zw)(t.qty),1),(0,s._)("td",f,(0,r.zw)(t.product?.price),1),(0,s._)("td",h,(0,r.zw)(t.final_total),1)])))),128))])]),(0,s._)("section",b,[(0,s._)("div",I,[g,(0,s._)("p",w,(0,r.zw)(H.orderInfo.user?.name),1)]),(0,s._)("div",y,[v,(0,s._)("p",k,(0,r.zw)(H.orderInfo.user?.email),1)]),(0,s._)("div",O,[z,(0,s._)("p",j,(0,r.zw)(H.orderInfo.user?.tel),1)]),(0,s._)("div",D,[N,(0,s._)("p",A,(0,r.zw)(H.orderInfo.user?.address),1)]),(0,s._)("div",G,[L,(0,s.wy)((0,s._)("textarea",{class:"modalInput",placeholder:"給我們的留言","onUpdate:modelValue":e[0]||(e[0]=t=>H.orderInfo.message=t),readonly:""},null,512),[[a.nr,H.orderInfo.message]])]),(0,s._)("div",S,[(0,s._)("div",C,[(0,s._)("span",T,"總金額: "+(0,r.zw)(H.orderInfo.total),1),(0,s._)("button",{type:"button",onClick:e[1]||(e[1]=(...t)=>H.checkOrder&&H.checkOrder(...t)),class:"commonBtn"}," 確認訂單 ")])])])])],64)}var $=l(6265),U=l.n($),Y=l(4870),q=l(678),B=l(65),E={name:"CheckOrder",setup(){const t=(0,q.tv)(),e=(0,q.yj)(),l=(0,B.oR)(),r=(0,s.f3)("$ElNotification"),a=(0,Y.iH)({}),o=t=>{const e=`https://vue3-course-api.hexschool.io/api/traveljp/order/${t}`;l.commit("ISLOADING",!0),U().get(e).then((t=>{t.data.success?a.value=t.data.order:r({title:"錯誤",message:t.data.message,type:"error"}),l.commit("ISLOADING",!1)})).catch((t=>{t&&l.commit("ISLOADING",!1)}))},d=()=>{const s=`https://vue3-course-api.hexschool.io/api/traveljp/pay/${e.params.orderId}`;l.commit("ISLOADING",!0),U().post(s).then((s=>{s.data.success?t.push({name:"OrderComplete",params:{order_id:e.params.orderId}}):r({title:"錯誤",message:s.data.message,type:"error"}),l.commit("ISLOADING",!1)})).catch((t=>{t&&l.commit("ISLOADING",!1)}))};return(0,s.bv)((()=>{o(e.params.orderId)})),{orderInfo:a,checkOrder:d}}},F=l(89);const K=(0,F.Z)(E,[["render",H]]);var R=K}}]);