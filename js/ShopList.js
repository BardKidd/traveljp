"use strict";(self["webpackChunktraveljp"]=self["webpackChunktraveljp"]||[]).push([[687],{9580:function(e,t,a){a.r(t),a.d(t,{default:function(){return K}});var l=a(6807),o=a(3396),s=a(7139),n=a(9242);const r=(0,o._)("div",{class:"shopListBG mb-32"},null,-1),i={class:"container w-5/6 lg:w-4/5 mx-auto mb-16"},c=(0,o._)("div",{class:"flex items-center mb-32"},[(0,o._)("div",{class:"hidden lg:block lrLine flex-1"}),(0,o._)("h1",{class:"text-center flex-1 font-bold text-4xl md:text-5xl lg:text-6xl otherFont"}," 精選計畫 "),(0,o._)("div",{class:"hidden lg:block lrLine flex-1"})],-1),p={key:0,class:"text-left md:text-right font-bold mb-5 otherFont"},u={class:"md:flex flex-wrap"},d={class:"w-full h-max md:w-1/5 mb-40 md:mb-0 shadow-[0_0_20px_rgba(0,0,0,0.2)] p-5"},m=(0,o._)("p",{class:"font-bold text-lg otherFont"},"篩選器",-1),g=(0,o._)("h3",{class:"leading-loose font-bold otherFont"},"地區",-1),h={key:0,class:"mb-3"},f={class:"cursor-pointer"},v=["value"],w=(0,o._)("h3",{class:"leading-loose font-bold otherFont"},"旅程(天數)",-1),b={key:1,class:"mb-3"},y={class:"cursor-pointer"},D=["value"],k={class:"flex-1 md:ml-10 sm:flex flex-wrap"};function _(e,t,a,_,x,C){const j=(0,o.up)("font-awesome-icon"),I=(0,o.up)("Card"),A=l.Z;return(0,o.wg)(),(0,o.iD)(o.HY,null,[r,(0,o._)("div",i,[c,_.hasCalledAll?((0,o.wg)(),(0,o.iD)("p",p," 篩選結果為 "+(0,s.zw)(_.rows.length)+"，全部共 "+(0,s.zw)(_.allData.length)+" 筆 ",1)):(0,o.kq)("",!0),(0,o._)("section",u,[(0,o._)("aside",d,[m,(0,o._)("div",{class:"flex justify-between mb-3 border-b-2 cursor-pointer hover:primary-red",onClick:t[0]||(t[0]=e=>_.openArea=!_.openArea)},[g,(0,o._)("span",null,[_.openArea?((0,o.wg)(),(0,o.j4)(j,{key:0,icon:["fas","minus"]})):((0,o.wg)(),(0,o.j4)(j,{key:1,icon:["fas","plus"]}))])]),_.openArea?((0,o.wg)(),(0,o.iD)("div",h,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.allPlace,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("label",f,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>_.selectCriteria=e),type:"checkbox",class:"mr-2",value:e},null,8,v),[[n.e8,_.selectCriteria]]),(0,o.Uk)(" "+(0,s.zw)(e),1)])])))),128))])])):(0,o.kq)("",!0),(0,o._)("div",{class:"flex justify-between mb-3 border-b-2 cursor-pointer hover:primary-red",onClick:t[2]||(t[2]=e=>_.openDays=!_.openDays)},[w,(0,o._)("span",null,[_.openDays?((0,o.wg)(),(0,o.j4)(j,{key:0,icon:["fas","minus"]})):((0,o.wg)(),(0,o.j4)(j,{key:1,icon:["fas","plus"]}))])]),_.openDays?((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("ul",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.allUnit,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e},[(0,o._)("label",y,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>_.selectCriteria=e),type:"checkbox",class:"mr-2",value:e},null,8,D),[[n.e8,_.selectCriteria]]),(0,o.Uk)((0,s.zw)(e),1)])])))),128))])])):(0,o.kq)("",!0)]),(0,o._)("div",k,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(_.rows,(e=>((0,o.wg)(),(0,o.j4)(I,{onClick:t=>_.getProductDetail(e),onJoinTheShoppingCar:t=>_.joinTheShoppingCar(e),productData:e,key:e.id},null,8,["onClick","onJoinTheShoppingCar","productData"])))),128))])]),!_.hasCalledAll&&_.rows.length>0?((0,o.wg)(),(0,o.j4)(A,{key:1,onHandleCurrentPage:_.changePage,total:_.paginationInfo.total_pages,class:"justify-end"},null,8,["onHandleCurrentPage","total"])):(0,o.kq)("",!0)])],64)}var x=a(6265),C=a.n(x),j=a(4870),I=a(65),A=a(678);const S={class:"w-full sm:w-1/2 lg:w-1/3 font-bold"},H={class:"sm:ml-3 md:ml-5"},L=["src"],O={key:1,src:"#",alt:"未提供圖片",class:"cursor-pointer w-full object-center object-cover h-52"},P={class:"font-bold text-lg mt-5 cursor-pointer"},G={class:"otherFont primary-black mt-3 cursor-pointer line-clamp-3"},N={class:"flex flex-wrap mt-3 mb-6"},T=(0,o._)("button",{type:"button",class:"otherFont font-bold ml-5 hover:primary-red"}," 詳細 ",-1);function F(e,t,a,l,r,i){return(0,o.wg)(),(0,o.iD)("div",S,[(0,o._)("div",H,[l.props.productData?.imagesUrl?((0,o.wg)(),(0,o.iD)("img",{key:0,src:l.props.productData?.imagesUrl[0],alt:"地點首圖",class:"cursor-pointer w-full object-center object-cover h-52"},null,8,L)):((0,o.wg)(),(0,o.iD)("img",O)),(0,o._)("h2",P,(0,s.zw)(l.props.productData.title),1),(0,o._)("p",G,(0,s.zw)(l.props.productData.description),1),(0,o._)("div",N,[(0,o._)("button",{type:"button",class:"otherFont font-bold commonBtn--reverse",onClick:t[0]||(t[0]=(0,n.iM)(((...e)=>l.iWantThis&&l.iWantThis(...e)),["stop"]))}," 我要這個 "),T])])])}var U={name:"CommonCard",emits:["joinTheShoppingCar"],props:{productData:{type:Object,required:!0}},setup(e,{emit:t}){const a=()=>{t("joinTheShoppingCar","ts")};return{props:e,iWantThis:a}}},q=a(89);const z=(0,q.Z)(U,[["render",F]]);var Y=z,Z={name:"ShopList",setup(){const e=["北海道","東北","東京","北陸","中部","關西","山陽山陰","四國","九州","沖繩"],t=["當天來回","2天1夜","3天2夜","4天3夜","5天4夜","6天5夜","7天6夜","8天7夜","9天8夜","10天9夜"],a=(0,j.iH)([]),l=(0,j.iH)([]),s=(0,j.iH)([]),n=(0,o.f3)("$ElNotification"),r=(0,I.oR)(),i=(0,A.tv)(),c=(0,j.iH)(!1),p=(0,j.iH)(!0),u=(0,j.iH)(!0),d=(0,j.iH)({}),m=e=>{g(e)},g=(e=1)=>{const t=`https://vue3-course-api.hexschool.io/api/traveljp/products?page=${e}`;r.commit("ISLOADING",!0),C().get(t).then((e=>{e.data.success?(a.value=e.data.products,d.value=e.data.pagination):n({title:"錯誤",message:`${e.data.message}`,type:"error"}),r.commit("ISLOADING",!1)})).catch((e=>{e&&r.commit("ISLOADING",!1)}))},h=()=>{const e="https://vue3-course-api.hexschool.io/api/traveljp/products/all";r.commit("ISLOADING",!0),C().get(e).then((e=>{e.data.success?(l.value=e.data.products,a.value=l.value.filter((e=>{let t=!1;if(s.value.some((a=>{if(e.category===a||e.unit===a)return t=!0,!0})),t)return e}))):n({title:"錯誤",message:`${e.data.message}`,type:"error"}),r.commit("ISLOADING",!1)})).catch((e=>{e&&r.commit("ISLOADING",!1)}))},f=e=>{i.push({name:"ShopDetail",params:{id:e.id}})},v=e=>{const t="https://vue3-course-api.hexschool.io/api/traveljp/cart",a={product_id:e.id,qty:1};r.commit("ISLOADING",!0),C().post(t,{data:a}).then((e=>{e.data.success?n({title:"成功",message:e.data.message,type:"success"}):n({title:"錯誤",message:e.data.message,type:"error"}),r.commit("ISLOADING",!1)})).catch((e=>{e&&r.commit("ISLOADING",!1)}))};return(0,o.YP)((()=>s.value),(e=>{e.length>=1&&c.value&&(a.value=l.value.filter((e=>{let t=!1;if(s.value.some((a=>{if(e.category===a||e.unit===a)return t=!0,!0})),t)return e}))),0===e.length?(g(),c.value=!1):1!==e.length||c.value||(h(),c.value=!0)})),(0,o.bv)((()=>{g()})),{rows:a,paginationInfo:d,allPlace:e,allUnit:t,allData:l,hasCalledAll:c,openArea:p,openDays:u,selectCriteria:s,changePage:m,getOnePageData:g,getProductDetail:f,joinTheShoppingCar:v}},components:{Pagination:l.Z,Card:Y}};const $=(0,q.Z)(Z,[["render",_]]);var K=$}}]);